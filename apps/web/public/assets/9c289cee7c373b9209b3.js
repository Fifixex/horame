"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["77287"],{725436:function(e,t,n){n.d(t,{m:function(){return u}});var s=n(454585),a=n(551452),r=n(532901);let l={...s.Z.guildEventRules.link,react:(0,r.Z)({enableBuildOverrides:!1,mustConfirmExternalLink:!0}).react},i={...s.Z.guildEventRules.channelMention,react:(0,a.Z)({enableBuildOverrides:!1,shouldCloseDefaultModals:!0,shouldStopPropagation:!0}).react},u=s.Z.reactParserFor({...s.Z.guildEventRules,link:l,channelMention:i})},315416:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(470079),a=n(442837),r=n(897285),l=n(924301);function i(e,t,n){let i=(0,a.e7)([l.ZP],()=>l.ZP.getUserCount(t,n));return(0,s.useEffect)(()=>{null!=e&&null!=t&&r.Z.getGuildEventUserCounts(e,t,null!=n?[n]:[])},[t,e,n]),i}},405613:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(134432),a=n(981631);function r(e,t){let n;if(null==e.image)return null;null==t&&(t=window.screen.width*(0,s.x_)()),t=(0,s.oO)(t);let r=window.GLOBAL_ENV.CDN_HOST;if(null!=r){var l;n="".concat((l="https:","https:"),"//").concat(r,"/guild-events/").concat(e.id,"/").concat(e.image)}else n=location.protocol+window.GLOBAL_ENV.API_ENDPOINT+a.ANM.GUILD_EVENT_IMAGE(e.id,e.image,"png");return n+="?size=".concat(t)}},391174:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(735250),a=n(470079),r=n(120356),l=n.n(r),i=n(725436),u=n(413091),o=n(153521);function c(e){let{description:t,className:n,guildId:r,truncate:c=!0}=e,E=a.useMemo(()=>(0,i.m)(t,!0,{guildId:r,allowLinks:!0,allowHeading:!0,allowList:!0}),[t,r]);return(0,s.jsx)("div",{className:l()(u.descriptionText,n,o.markup,{[u.truncate]:c}),children:E})}},95291:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(735250);n(470079);var a=n(120356),r=n.n(a),l=n(827920);function i(e){let{source:t,className:n}=e;return null==t?null:(0,s.jsx)("div",{className:r()(l.container,n),style:{backgroundImage:"url(".concat(t,")")}})}},742593:function(e,t,n){n.d(t,{HZ:function(){return x},Rf:function(){return S},ZP:function(){return h}});var s=n(735250);n(470079);var a=n(120356),r=n.n(a),l=n(442837),i=n(481060),u=n(271383),o=n(51144),c=n(894017),E=n(79874),d=n(315416),N=n(236373),T=n(854698),_=n(391174),D=n(95291),m=n(390966),v=n(689938),g=n(530703);function x(e){let{className:t,creator:n,guildId:a,isNew:_,isHub:D=!1,guildEvent:x,eventPreview:S,recurrenceId:h}=e,f=(0,d.Z)(a,x.id,h),I=null!=x?x:S,R=(0,l.e7)([u.ZP],()=>u.ZP.getNick(a,null==n?void 0:n.id),[a,n]);h=null==I||null!=h?h:(0,T.DK)(I);let{startTime:L}=(0,E.ZP)(null!=x?x:S,h),C=(0,c.Z)(h,x.id),p=(null==I?void 0:I.scheduled_start_time)!=null?(0,T.lh)(C,L,new Date(I.scheduled_start_time)):null;if(null==I)return null;let{entity_type:Z,status:A,recurrence_rule:j}=I;return(0,s.jsxs)("div",{className:r()(g.statusContainer,t),children:[(0,s.jsx)(m.z,{startTime:L.toISOString(),status:null!=p?p:A,eventType:Z,isNew:_,recurrenceRule:(0,N.KV)(j),guildEventId:x.id,recurrenceId:h}),(0,s.jsx)("div",{className:g.spacer}),!D&&null!=n&&(0,s.jsx)(i.Tooltip,{text:v.Z.Messages.GUILD_EVENT_CREATED_BY.format({username:null!=R?R:o.ZP.getName(n)}),children:e=>(0,s.jsx)(i.Avatar,{...e,src:n.getAvatarURL(a,20),size:i.AvatarSizes.SIZE_20,"aria-label":null!=R?R:n.username,className:g.creator})}),(0,s.jsx)(i.Tooltip,{text:v.Z.Messages.GUILD_EVENT_INTERESTED_COUNT.format({count:f}),children:e=>(0,s.jsxs)("div",{className:g.rsvpCount,...e,children:[(0,s.jsx)(i.GroupIcon,{size:"xxs",color:"currentColor",className:g.rsvpIcon}),(0,s.jsx)(i.Text,{color:"header-secondary",variant:"text-sm/normal",children:f})]})})]})}function S(e){let{headerVariant:t="heading-lg/medium",descriptionClassName:n,name:a,description:l,truncate:u,guildId:o,imageSource:c}=e;return(0,s.jsxs)("div",{className:r()({[g.withThumbnail]:null!=c}),children:[(0,s.jsxs)("div",{className:r()({[g.descriptionWithThumbnail]:null!=c}),children:[(0,s.jsx)(i.Heading,{variant:t,selectable:!0,className:g.eventName,children:a}),null!=l&&(0,s.jsx)(_.Z,{description:l,className:r()(n,g.description),truncate:u,guildId:o})]}),null!=c&&(0,s.jsx)("div",{className:g.thumbnailContainer,children:(0,s.jsx)(D.Z,{source:c,className:g.thumbnail})})]})}function h(e){let{headerVariant:t,descriptionClassName:n,creator:a,name:r,description:l,imageSource:i,isHub:u=!1,truncate:o,guildId:c,isNew:E,guildEvent:d,eventPreview:N,recurrenceId:T}=e;return(0,s.jsxs)("div",{className:g.container,children:[(0,s.jsx)(x,{className:g.eventInfoStatusContainer,creator:a,guildId:c,isHub:u,isNew:E,guildEvent:d,eventPreview:N,recurrenceId:T}),(0,s.jsx)(S,{name:r,description:l,headerVariant:t,descriptionClassName:n,truncate:o,guildId:c,imageSource:i})]})}},390966:function(e,t,n){n.d(t,{z:function(){return f}}),n(47120);var s,a,r=n(735250),l=n(470079),i=n(120356),u=n.n(i),o=n(913527),c=n.n(o),E=n(692547),d=n(481060),N=n(44315),T=n(894017),_=n(854698),D=n(849464),m=n(765305),v=n(231338),g=n(689938),x=n(402974);(a=s||(s={}))[a.SCHEDULED=0]="SCHEDULED",a[a.STARTING_SOON=1]="STARTING_SOON",a[a.READY=2]="READY",a[a.STARTED=3]="STARTED",a[a.ENDED=4]="ENDED",a[a.CANCELED=5]="CANCELED";function S(){return(0,r.jsx)(d.TextBadge,{className:x.newBadge,color:E.Z.unsafe_rawColors.BRAND_260.css,text:(0,r.jsx)(d.Text,{className:x.newBadgeText,variant:"text-xs/bold",children:g.Z.Messages.NEW})})}function h(e){let{children:t,className:n,tooltipText:s}=e;return(0,r.jsx)("div",{className:u()(x.eventStatusContainer,n),children:(0,r.jsx)(d.Tooltip,{position:"right",text:s,shouldShow:null!=s,children:e=>(0,r.jsx)("div",{...e,className:u()(x.eventStatusContainer,n),children:t})})})}function f(e){let{startTime:t,status:n,eventType:s,className:a,endTime:i,liveText:o,textVariant:E="text-sm/semibold",isNew:f,recurrenceRule:I,guildEventId:R,recurrenceId:L}=e,C=(0,N.O0)(v.tP.TEXT_BRAND),p=(0,N.O0)(v.tP.TEXT_POSITIVE),Z=(0,N.O0)(v.tP.TEXT_DANGER);null==o&&(o=s===m.WX.EXTERNAL?g.Z.Messages.STAGE_CHANNEL_HAPPENING_NOW:g.Z.Messages.STAGE_CHANNEL_LIVE_NOW);let A=(0,T.Z)(L,R),[{startDateTimeString:j,endDateTimeString:M,currentOrPastEvent:O,upcomingEvent:U,diffMinutes:P},G]=l.useState((0,_.ub)(t,i));l.useEffect(()=>{G((0,_.ub)(t,i));let e=setInterval(()=>G((0,_.ub)(t,i)),1e3);return()=>{clearInterval(e)}},[t,i]);let H=j;null!=M&&""!==M&&(H=g.Z.Messages.START_DATE_TO_END_DATE.format({start:j,end:M}));let w=l.useMemo(()=>n===m.p1.CANCELED||(null==A?void 0:A.is_canceled)?5:n===m.p1.ACTIVE?3:m.$I.has(n)?4:O?2:U?1:0,[n,null==A?void 0:A.is_canceled,O,U]),b=function(e,t,n,s,a){switch(e){case 1:return a>0?g.Z.Messages.STARTING_IN_MINUTES.format({minutes:a}):g.Z.Messages.STARTING_SOON;case 2:return g.Z.Messages.STARTING_SOON;case 3:return null!=s&&""!==s?g.Z.Messages.START_DATE_TO_END_DATE_WITH_COLOR.format({start:n,startHook:e=>(0,r.jsx)(d.Text,{color:"text-positive",variant:"text-sm/semibold",className:x.liveEventEndTime,children:e}),end:s}):null!=n?n:"";default:return t}}(w,H,o,M,P),{Icon:V,iconColor:k,textColor:Y,tooltipText:z}=l.useMemo(()=>(function(e){let t,{timeStatus:n,textBrand:s,textPositive:a,textDanger:r,endDateTimeString:l,startDateTimeString:i}=e,u=d.CalendarIcon,o=s,c="header-secondary";switch(n){case 3:o=a,c=null!=l?void 0:"text-positive";break;case 4:u=d.ClockIcon;break;case 2:case 1:c="text-brand",t=i;break;case 5:o=r}return{Icon:u,iconColor:o.hex,textColor:c,tooltipText:t}})({timeStatus:w,textBrand:C,textPositive:p,textDanger:Z,endDateTimeString:M,startDateTimeString:j}),[w,C,p,Z,M,j]),B=null;if(null!=I){let e=(0,_.Ho)(I);B=g.Z.Messages.GUILD_SCHEDULED_EVENT_RECURRENCE_RULE.format({recurrenceRule:e.toText()});let n=c()(t);B=function(e,t){let n=t.toDate(),s=n.toLocaleString(g.Z.getLocale(),{weekday:"long"});switch(e){case D.z.WEEKLY:return g.Z.Messages.GUILD_SCHEDULED_EVENT_REPEATS_WEEKLY.format({weekday:s});case D.z.BIWEEKLY:return g.Z.Messages.GUILD_SCHEDULED_EVENT_REPEATS_BIWEEKLY.format({weekday:s});case D.z.MONTHLY:let a=Math.ceil(n.getDate()/7);return g.Z.Messages.GUILD_SCHEDULED_EVENT_REPEATS_MONTHLY.format({weekday:s,nth:a});case D.z.YEARLY:return g.Z.Messages.GUILD_SCHEDULED_EVENT_REPEATS_YEARLY.format({date:n.toLocaleString(g.Z.getLocale(),{month:"short",day:"2-digit"})});case D.z.WEEKDAY_ONLY:return g.Z.Messages.GUILD_SCHEDULED_EVENT_REPEATS_WEEKDAYS;case D.z.WEEKEND_ONLY:return g.Z.Messages.GUILD_SCHEDULED_EVENT_REPEATS_WEEKENDS;default:return null}}((0,_.zi)(n,I),n)}return(0,r.jsxs)(h,{className:u()(a,{[x.isRecurring]:null!=B}),tooltipText:z,children:[f&&n===m.p1.SCHEDULED?(0,r.jsx)(S,{}):(0,r.jsx)(V,{color:k,size:"custom",width:20,height:20}),(0,r.jsxs)("div",{className:x.eventStatusLabel,children:[(0,r.jsx)(d.Text,{color:Y,variant:E,children:b}),null!=B&&(0,r.jsx)(d.Text,{color:"header-secondary",variant:"text-xs/normal",children:B})]})]})}},139712:function(e,t,n){n.d(t,{Z:function(){return d}}),n(47120);var s=n(735250),a=n(470079),r=n(481060),l=n(482241),i=n(124165),u=n(765305),o=n(689938),c=n(970775);function E(e){let{event:t,recurrenceId:n,guildId:E,onRsvp:d,...N}=e,[T,_]=a.useState(i.KX.SERIES),D=(0,i.X2)(t.id,null),m=(null==D?void 0:D.response)===u.gv.INTERESTED?u.gv.UNINTERESTED:u.gv.INTERESTED,v=m===u.gv.INTERESTED?o.Z.Messages.GUILD_SCHEDULED_EVENT_RSVP_PICKER_HEADER_INTERESTED:o.Z.Messages.GUILD_SCHEDULED_EVENT_RSVP_PICKER_HEADER_UNINTERESTED;return(0,s.jsx)(r.ConfirmModal,{...N,header:v,confirmText:o.Z.Messages.OK,cancelText:o.Z.Messages.CANCEL,onConfirm:()=>{T===i.KX.SERIES?l.Z.updateRsvp(t.id,null,E,m):l.Z.updateRsvp(t.id,n,E,m),null==d||d(),N.onClose()},confirmButtonColor:r.Button.Colors.BRAND,children:(0,s.jsx)(r.RadioGroup,{className:c.responseOptions,value:T,options:(0,i.pF)(),onChange:e=>_(e.value)})})}function d(e,t,n,a){(0,i.cg)({eventId:e,recurrenceId:t,guildId:n,updateRsvp:(t,s,a,r)=>l.Z.updateRsvp(e,s,n,r),openRsvpPicker:(e,t)=>{(0,r.openModalLazy)(()=>Promise.resolve(r=>(0,s.jsx)(E,{...r,event:e,recurrenceId:t,guildId:n,onRsvp:a})))},onRsvp:a})}}}]);
//# sourceMappingURL=9c289cee7c373b9209b3.js.map